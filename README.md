Этап 1:

— Реструктуризация конфигурационных файлов в единую директорию

— Рефакторинг повторяющихся блоков кода: 

1. Во многих функциях создается подключение к базе данных с помощью create_connection(), а затем используется with conn и with conn.cursor() для выполнения SQL-запросов. Вместо этого добавить общую функцию execute_query

2. Во многих функциях дублируется проверка на существование записи перед добавлением новой записи. Вместо этого добавить общую функцию check_if_exists

3. Вместо того чтобы в каждом блоке использовать try...except для обработки ошибок, можно создать общий декоратор для обработки ошибок и логирования.


Этап 2:

— Унификация CRUD-операций: функции для работы с книгами, авторами, жанрами и т.д. имеют повторяющиеся операции по добавлению, удалению и обновлению записей в таблицах. Необходимо создать общие функции для этих операций

— Во многих обработчиках происходит валидация данных, введенных пользователем. Необходимо вынести проверки в отдельные функции

Этап 3:

— Рефакторинг сообщений и локализация. Вынести все сообщения от бота в отдельный файл локализации (поможет добавлять многоязычную поддержку или менять тексты в будущем)

— Рефакторинг нейминга для более явного обозначения назначения функций/обозначения асинхронных функций/достижения согласованности в именовании состояний и т.д.

— Анализ и добавление дополнительных индексов для оптимизации скорости работы БД (например, idx_books_name ON Books(name), idx_authors_name ON Authors(name) и тому подобные индексы для ускорения поиска данных и повышения эффективности запросов к БД)
